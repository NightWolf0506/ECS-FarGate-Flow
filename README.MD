# ğŸš€ Strapi CMS Deployment on AWS EC2 using Terraform & GitHub Actions

This project automates the deployment of a Strapi backend using:

- ğŸ³ Docker (containerized build)
- â˜ï¸ AWS EC2 (Ubuntu 22.04)
- ğŸ“¦ Docker Hub (image hosting)
- ğŸ”§ Terraform (infrastructure as code)
- ğŸ¤– GitHub Actions (CI/CD pipeline)

---

## ğŸ“ Project Structure

```
Repo/
â”œâ”€â”€ .github/workflows/
â”‚   â””â”€â”€ deploy.yml          # CI/CD pipeline: Docker build, push & deploy
â”œâ”€â”€ docker/
â”‚   â””â”€â”€ Dockerfile          # Dockerfile for production Strapi build
â”œâ”€â”€ terraform/
â”‚   â””â”€â”€ main.tf             # Terraform to provision EC2 & deploy container
â”œâ”€â”€ Strapi-Aryan/
â”‚   â”œâ”€â”€ package.json        # Strapi backend code
â”‚   â””â”€â”€ .dockerignore       # Docker ignore for build context
â””â”€â”€ README.md
```

---

## âš™ï¸ Setup Instructions

### ğŸ” 1. Create GitHub Secrets

In your GitHub repository settings, add the following secrets:

| Secret Name              | Description                       |
|--------------------------|-----------------------------------|
| `DOCKER_USERNAME`        | Your Docker Hub username          |
| `DOCKER_PASSWORD`        | Your Docker Hub password/token    |
| `AWS_ACCESS_KEY_ID`      | IAM access key for AWS            |
| `AWS_SECRET_ACCESS_KEY`  | IAM secret key for AWS            |
| `AWS_REGION`             | AWS region (e.g. `us-east-1`)     |

---

### ğŸ—ï¸ 2. Deployment Workflow

Each push to `main` (or manual trigger) will:

1. Build the Docker image using `Strapi-Aryan/`
2. Push the image to Docker Hub: `nightwolf0506/strapi-app:latest`
3. Use Terraform to:
   - Provision an EC2 instance
   - Install Docker and run the container on port 1337

> ğŸŒ Result: Access your Strapi backend at `http://<EC2-IP>:1337`

---

## ğŸ“¦ Docker (Local Build & Run)

```bash
docker build -f docker/Dockerfile -t strapi-app ./Strapi-Aryan
docker run -p 1337:1337 strapi-app
```

---

## ğŸŒ Terraform (Manual Deploy)

```bash
cd terraform
terraform init
terraform apply
```

âœ… Output: EC2 public IP where Strapi is running.

---

## ğŸ§¼ Cleanup

```bash
cd terraform
terraform destroy
```

---


